<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Form</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
        }
        h2 {
            color: #333;
        }
        p {
            margin-bottom: 10px;
        }
        #user-details-container {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <h2>User Information</h2>
    <div id="messages-container">
        <h2 id="message"></h2>
        <h2 id="message2"></h2>
    </div>

    <div id="user-details-container" style="display: none;">
        <p><strong>Name:</strong> <span id="user-name"></span></p>
        <p><strong>Email:</strong> <span id="user-email"></span></p>
    </div>

    <button id="fetch-user-btn" class="btn btn-primary">Fetch User Details</button>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $("#fetch-user-btn").on("click", function() {
                $.ajax({
                    url: '/user/data', // Replace with the actual URL to fetch user data
                    type: 'GET',
                    dataType: 'json',
                    success: function(data) {
                        if (data) {
                            $("#message").text(data.message || "");
                            $("#message2").text(data.message2 || "");
                            $("#user-name").text(data.user ? data.user.name : "");
                            $("#user-email").text(data.user ? data.user.email : "");
                            $("#user-details-container").show();
                        } else {
                            $("#message").text("Error: Could not retrieve user data.");
                            $("#user-details-container").hide();
                        }
                    },
                    error: function(error) {
                        console.error("Error fetching user data:", error);
                        $("#message").text("Error fetching user data.");
                        $("#user-details-container").hide();
                    }
                });
            });

            // Optionally, you could fetch the data on page load
            // $(window).on('load', function() {
            //     $("#fetch-user-btn").trigger('click');
            // });
        });
    </script>
</body>
</html>